(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{16975:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,62093,23)),Promise.resolve().then(r.t.bind(r,27735,23)),Promise.resolve().then(r.t.bind(r,30347,23)),Promise.resolve().then(r.bind(r,83048))},68904:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});var a=r(58021);let n={handleAuthentication:async e=>{try{switch(e.formType){case"LOGIN":return(await a.A.post("/login",{email:e.email,password:e.password})).data;case"REGISTER":return(await a.A.post("/register",{username:e.username,email:e.email,password:e.password})).data}}catch(e){return console.log(e),null}},async getCurrentUser(){try{return(await a.A.get("/current-user")).data}catch(e){return console.log(e),null}}}},58021:(e,t,r)=>{"use strict";r.d(t,{A:()=>n}),console.log({BASE:"https://api.khalidkhnz.in/api/v1"});let a=r(82651).A.create({baseURL:"https://api.khalidkhnz.in/api/v1"});a.interceptors.request.use(e=>{if(localStorage){let t=localStorage.getItem("news-app");if(t){let{token:r}=JSON.parse(t);r&&(e.headers.Authorization="Bearer ".concat(r))}}return e});let n=a},83048:(e,t,r)=>{"use strict";r.d(t,{Machine:()=>c,z:()=>d});var a=r(95155),n=r(68904),l=r(12115);let s=function(e,t){let r="undefined"!=typeof localStorage,[a,n]=(0,l.useState)(()=>{if(r){let t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(e){console.error("Error parsing localStorage value:",e)}}return"function"==typeof t?t():t});return(0,l.useEffect)(()=>{let t=t=>{if(t.key===e&&null!==t.newValue)try{n(JSON.parse(t.newValue))}catch(e){console.error("Error parsing localStorage value:",e)}};return r&&window.addEventListener("storage",t),()=>{r&&window.removeEventListener("storage",t)}},[e,r]),[a,t=>{n(t),r&&localStorage.setItem(e,JSON.stringify(t))}]};var o=r(860);let i={auth:null,token:""},u=(0,l.createContext)(null);function c(e){let{children:t}=e,[r,l]=s("news-app",i);return(0,o.Ay)("current-user",async()=>{if(r.auth)return null;let{user:e}=await n.u.getCurrentUser();l({...r,auth:e})}),(0,a.jsx)(u.Provider,{value:{state:r,setState:l,AUTHENTICATE:function(e,t){l({...r,token:e,auth:t})},LOGOUT:function(){l({...r,auth:null,token:null})}},children:t})}function d(){let e=(0,l.useContext)(u);if(!e)throw Error("Machine can't be used outside of its context");return e}},30347:()=>{},62093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},27735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,651,860,441,517,358],()=>t(16975)),_N_E=e.O()}]);